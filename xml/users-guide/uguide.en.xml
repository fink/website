<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document SYSTEM "../finkdoc.dtd">
<document filename="index" lang="en">
  <title>Fink User's Guide</title>
  <shorttitle>User's Guide</shorttitle>
  <cvsid>$Id: uguide.en.xml,v 1.57 2019/01/19 10:11:12 nieder Exp $</cvsid>
  <preface>
    <p>
This document gives an overview over all features of Fink.
(The following older documents may offer a broader view:
<link url="/doc/install/index.php">Installation</link>,
<link url="/doc/usage/index.php">Usage</link>
and the ReadMe.rtf included in the binary distribution disk image.)
Also check out the
<link url="/doc/">documentation
section</link> of the web site, it has some other useful documents
beyond that.
</p>
    <p>
Welcome to the Fink User's Guide.
This guide covers first time installation and upgrade procedures for
both the source and the binary distribution.
Package installation and maintenance is covered as well.
</p>
  </preface>
  <chapter filename="intro">
    <title>Introduction</title>
    <shorttitle>Introduction</shorttitle>
    <section name="what">
      <title>What is Fink?</title>
      <p>
Fink is a distribution of Unix Open Source software for Mac OS X and
Darwin.
It brings a wide range of free command-line and graphical software
developed for Linux and similar operating systems to your Mac.
</p>
    </section>
    <section name="req">
      <title>Requirements</title>
      <p>
In any case you will need:
</p>
      <ul>
        <li>
          <p>
An installed Mac OS X system, version 10.4 or later, or equivalent
Darwin releases.
Earlier versions of both will <em>not</em> work.
See below for more information about supported systems.
</p>
        </li>
        <li>
          <p>
Internet access.
Both source code and binary packages are downloaded from Internet
download sites.
</p>
        </li>
      </ul>
      <p>
If you intend to use the source distribution (see below), you will
also need:
</p>
      <ul>
        <li>
          <p>
Developer tools.  
On Mac OS X, install the XcodeTools.mpkg package from the installation DVD,
or <link url="http://connect.apple.com">download</link> the latest version--this is often desirable, as later versions frequently fix issues (though admittedly sometimes they break things).    
Note that the tools must match your Mac OS X version.
</p>
          <p>
It's a good idea to have XCode installed even if you
don't intend to build packages from source.
Some of the programs installed by the package are actually general
purpose command line tools.
Some packages may depend on those to run.
</p>
        </li>
        <li>
          <p>
Patience.
Compiling several big packages takes time.
I'm talking hours or even days here.
</p>
        </li>
      </ul>
    </section>
    <section name="supported-os">
      <title>Supported Systems</title>
      <p><em>Mac OS X 10.6</em> is the leading-edge platform, and is considered to be <quote>fully supported and tested</quote>, though as a newer operating system there are still some issues.  Most of the developers run it, and those who are running 10.4 have 10.5 users test their work.</p>
      <p>
        <em>Mac OS X 10.5</em> is considered to be <quote>fully supported and tested</quote>, although there may still be stray compile problems with single packages. Many of the developers run it, and those who don't have 10.4 users test their work.
</p>
      <p><em>Mac OS X 10.4</em> will be deprecated soon.  It is considered to be <quote>fully supported and tested</quote>.</p>
    </section>
    <section name="src-vs-bin">
      <title>Source vs. Binary</title>
      <p>
Software is written ("developed") in human-readable programming
languages; this form is called the "source code".
Before a computer can actually run a program, it must be transformed
into low-level machine code instructions (unreadable by most humans).
That process is called "compiling" and the resulting program is called
"executable" or "binary".
(The process is also referred to as "building", because it usually
involves more steps than just compiling.)
</p>
      <p>
When you buy commercial software you don't get to see the source code,
though - companies treat it as a trade secret.
You only get the ready-to-run executable, which means you have no way
to modify the program or even find out what it actually does when it's
run.
</p>
      <p>
Not so with <link url="http://www.opensource.org/">Open Source</link>
software.
As the name implies, the source code is open for anyone to see and
modify.
In fact, most Open Source software is only distributed as source code
by its authors, and you must compile it on your computer to get a
program that can be run.
</p>
      <p>
Fink lets you choose between the two models.
The "source" distribution will download the original source, adapt it
to Mac OS X and to Fink's policy, and compile it on your computer.
That process is fully automated, but takes some time.
The "binary" distribution on the other hand will download pre-compiled
packages from the Fink site and install those, saving you the time for
compiling.
It is actually possible to mix the two models at will.
The rest of this manual will show you how.
</p>
    </section>
  </chapter>
  <chapter filename="install">
    <title>First Time Installation</title>
    <shorttitle>Install</shorttitle>
    <preface>
      <p>
During first time installation, a base system with the package
management tools is installed on your machine.
After that you must set up your shell environment to use the software
installed by Fink.
You only need to do this once; you can upgrade any Fink installation
in place, without reinstalling.
This is covered in the <xref chapter="upgrade">Upgrading
chapter</xref>.
</p>
      <p>
Once you have the package management tools installed, you can use them
to install more software.
This is covered in the <xref chapter="packages">Installing Packages
chapter</xref>.
</p>
    </preface>
    <section name="bin">
      <title>Installing the Binary Distribution</title>
      <p>
The binary distribution comes as a Mac OS X installer package (.pkg),
wrapped in a disk image (.dmg).
After downloading the disk image from the
<link url="/download/bindist.php">download page</link>
(you may have to use your browser's "Save Target as..." or "Download
to Disk" function), double-click it to mount it.
Open the "Fink 0.x.x Installer" disk icon that appears on your desktop (or wherever you downloaded it) after Disk Utility has verified the file.
Inside you'll find some documentation and an installer package.
Double-click the installer package and follow the instructions on
screen.
</p>
      <p>
You will be asked for an administrator password and shown some texts.
Please read them - they may be more up-to-date than this user's guide.
When the installer prompts you for a drive to install to, be sure to
pick your system volume (the one on which you installed Mac OS X).
If you pick the wrong volume, the install will proceed, but Fink won't
work afterwards.
When the installer is finished, proceed with the
<xref section="setup">Setting Up Your Environment</xref> section.
</p>
    </section>
    <section name="src">
      <title>Installing the Source Distribution</title>
      <p>
The source distribution comes as a standard Unix tarball (.tar.gz).
It contains only the <code>fink</code> package manager <!--and its package
descriptions -->and will download the source for packages on the fly.
You can get it from the
<link url="/download/srcdist.php">download page</link>.
Older versions of StuffIt Expander have difficuly with handling long file names, so if you have any problems you'll need to remove the folder it generates and follow the command-line instructions below.
</p>
      <p>
The source release must be installed from the command line, so open
Terminal.app and change to the directory where you put the
<!--fink-0.x.x-full.tar.gz (put back when appropriate--> <filename>fink-0.27.x.tar.gz</filename> archive.  Your web browser may have partially extracted the archive; in this case you will have <filename>fink-0.27.x.tar</filename> in your download directory, and you should skip the first command below.
<!--(Note: If you have OS X 10.4 and XCode 2.1, you should use
<filename>fink-0.8.0-full-XCode-2.1.tar.gz</filename> instead, and make
the appropriate changes below.)-->
The following commands extract the archive:
</p>
      <!--<codeblock>tar -xzf fink-0.x.x-full.tar.gz</codeblock>-->
      <codeblock>
gunzip fink-0.27.x.tar.gz
tar -xf fink-0.27.x.tar</codeblock>
      <p>
That creates a directory with the same name as the archive.
We'll just keep on using the placeholder <!--<code>fink-0.x.x-full</code>-->
<filename>fink-0.27.x</filename> here.
Now, change into that directory and run the bootstrap script:
</p>
      <codeblock>cd fink-0.27.x
./bootstrap</codeblock>
      <p>
The script will run some checks on your system and use sudo to become
root - that will prompt you for your password.
Then, the script will ask you for the installation path.
Unless you have a good reason, you should use the default -
<filename>/sw</filename>.
Only that will allow you to install downloaded binary packages later
on.
Also, all examples use that path; be sure to substitute your actual
path if you use a different one.
</p>
      <p>
Next up is Fink configuration.
You'll be asked for things like proxy and mirror settings and whether
you want verbose messages.
If you don't understand a question, just press return to accept the
default choice.
You can re-run this process later using the <code>fink
configure</code> command.
</p>
      <p>
When the bootstrap script has all the information it needs, it will
start to download the source code for the base system and compile it.
No further interaction should be necessary at this point.
Don't worry if you see some packages being compiled twice.
This is required because to build a binary package of the package
manager, you first must have the package manager available.
</p>
      <p>
When the bootstrap is finished, proceed with the
<xref section="setup">Setting Up Your Environment</xref> section.
</p>
    </section>
    <section name="setup">
      <title>Setting Up Your Environment</title>
      <p>
To use the software installed in Fink's directory hierarchy, including
the package management programs themselves, you must set your PATH
environment variable (and some others) accordingly.  Current Fink versions do this automatically, and typically you will just need to open a new Terminal.app window to ensure that these settings are applied.  However, in some instances you will need to proceed manually.</p>
<p>In most cases, you can do this by entering the command
      </p>
      <codeblock>/sw/bin/pathsetup.sh</codeblock>
      <p>
	in a terminal window. </p>
      <p>Note that for some older versions of
	fink the program was called  <filename>pathsetup.command</filename>, and one could
	run it via <code>open /sw/bin/pathsetup.command</code>.      </p>
      <p>However, if this doesn't work for some reason, you can configure it
manually.  This will depend on the shell you are using, however.
You can determine the shell you are using by opening a terminal and
running the command:
</p>
      <codeblock>echo $SHELL</codeblock>
      <p>
 If it says "csh" or "tcsh" in it, you are using the C shell.  If it is
 bash, zsh, sh, or something similar, you are likely running a variant
 of the bourne shell.
</p>
      <ul>
        <li>
          <p>
            <strong>Bourne Shell</strong> (default on Mac OS X 10.3 and later) </p>
          <p>
   If you use a Bourne style shell (e.g. sh, bash, zsh), add the following
   lines to the file <code>.profile</code> in your home directory (or, if
   you have an existing <code>.bash_profile</code> file, you should use that
   instead):
  </p>
          <codeblock>. /sw/bin/init.sh</codeblock>
          <p>
   If you don't know how to add the line, run these commands:
  </p>
          <codeblock>cd
pico .profile</codeblock>
          <p>
   You are now in a full-screen (well, full terminal window) text editor and
   can simply start typing the <code>. /sw/bin/init.sh</code> line.  It's
   okay if there is a note that says "New file".  Be sure that you pressed
   Return at least once after the line, then press Control-O, Return,
   Control-X to get out of the editor.
  </p>
        </li>
        <li>
          <p>
            <strong>C Shell</strong> (default on Mac OS X 10.2 and earlier) </p>
          <p>
   If you use tcsh, add the following line to
   the file <filename>.cshrc</filename> in your home directory:
  </p>
          <codeblock>source /sw/bin/init.csh</codeblock>
          <p>
   If you don't know how to add the line, run these commands:
  </p>
          <codeblock>cd
pico .cshrc</codeblock>
          <p>
   You are now in a full-screen (well, full terminal window) text editor
   and can simply start typing the <code>source /sw/bin/init.csh</code>
   line.
   It's okay if there is a note that says "New file".
   Be sure that you pressed Return at least once after the line, then
   press Control-O, Return, Control-X to get out of the editor.
  </p>
          <p>There are a couple of common situations where you may need to edit additional files:</p>
          <ol>
            <li>
              <p>You have a <code>~/.tcshrc</code>.</p>
              <p>Such a file occasionally gets created by third-party applications, or 
  you may have done it yourself.
  In any case what will happen is that <code>~/.tcshrc</code> gets read and 
  <code>~/.cshrc</code> is ignored.
  The recommended procedure is to edit <code>~/.tcshrc</code> in a similar 
  manner to how you edited
  <code>~/.cshrc</code> above, and add the following line at the end:</p>
              <codeblock>source ~/.cshrc</codeblock>
              <p>That way, if you ever need to remove <code>~/.tcshrc</code>, you will be able to run Fink.</p>
            </li>
            <li>
              <p>You followed the instructions under <code>/usr/share/tcsh/examples/README</code>.</p>
              <p>These instructions tell you to create a <code>~/.tcshrc</code> and a<code> ~/.login</code> .  The problem in this case is with <code>~/.login</code>, which gets run after <code>~/.tcshrc</code>, and sources <code>/usr/share/tcsh/examples/login</code>.  The latter contains a line that overwrites your previous PATH setup.  What you should do in this case is create <code>~/Library/init/tcsh/path</code>:</p>
              <codeblock>mkdir -p ~/Library/init/tcsh
  pico ~/library/init/tcsh/path</codeblock>
              <p>and put:</p>
              <codeblock>source ~/.cshrc</codeblock>
              <p>in it.  You should also modify your .tcshrc as in item 1 above, to make sure that your PATH is set correctly for situations where <code>~/.login</code> doesn't get read.</p>
            </li>
          </ol>
          <p>
  Editing .cshrc (and other startup files) will only affect new shells (i.e. newly opened Terminal
  windows), so you should also run this command in all Terminal windows
  that you opened before you edited the file.
  You'll also need to run <code>rehash</code> because tcsh caches the
  list of available commands internally.
  </p>
        </li>
      </ul>
      <p>
Note that the <filename>init.sh</filename> and <filename>init.csh</filename> scripts also add <filename>/usr/X11R6/bin</filename> and
<filename>/usr/X11R6/man</filename> to your PATH so you can use X11 when
it is installed.
Fink packages have the ability to add settings of their own, e.g. the
qt package sets the QTDIR environment variable.
</p>
      <p>
Once your environment is set up, <!--current as of 11/16/2007--> you will need to grab package descriptions as per the <xref chapter="upgrade">Upgrading Fink</xref> chapter under <em>Upgrading the Source Distribution</em>, and then proceed to the
<xref chapter="packages">Installing Packages</xref> chapter to see how
you can install some actually useful packages using the various
package management tools included in Fink.  
 
</p>
    </section>
  </chapter>
  <chapter filename="packages">
    <title>Installing Packages</title>
    <shorttitle>Packages</shorttitle>
    <preface>
      <p>
Now that you have something that can be called a Fink installation,
this chapter shows you how to install the actual software packages you
came for.
Before we explain how to install packages using either the source or
the binary distribution, some important notes that apply to both.
</p>
    </preface>
    <section name="bin-dselect">
      <title>Installing Binary Packages with
dselect</title>
      <p>
        <code>dselect</code> is a program that lets you browse the list of
available packages and select which ones you want installed.
It runs inside Terminal.app, but takes over the whole "screen" and
uses simple keyboard navigation.
Like the other package management tools, <code>dselect</code> requires
root privileges, so you should use sudo (from an account with administrator privileges):
</p>
      <codeblock>sudo dselect</codeblock>
      <p>
        <em>Note:</em>
        <code>dselect</code> has known difficulties with the Mac OS X Terminal application.  You should run the following commands before using it, or put them in the appropriate startup file (e.g. <code>.cshrc</code> / <code>.profile</code>):</p>
      <p>bash users:</p>
      <codeblock>export TERM=xterm-color</codeblock>
      <p>tcsh users:</p>
      <codeblock>setenv TERM xterm-color</codeblock>
      <p>
The main menu has several choices:
</p>
      <ul>
        <li>
          <p>
            <em>[A]ccess</em> - this configures the network access method to use.
<em>You do not need to run this</em>, since Fink pre-configures
everything for you.
Actually, you should avoid this menu item as it may overwrite the
default configuration with one that doesn't work.
</p>
        </li>
        <li>
          <p>
            <em>[U]pdate</em> - this item downloads the list of available packages
from the Fink site.
This item does not install or update any actual packages, it just
updates the listings used for the package browser.
You must run this at least once after installing Fink.
</p>
        </li>
        <li>
          <p>
            <em>[S]elect</em> - this gives you the actual package listing, where
you can select and deselect the packages you want on your system.
More about this later.
</p>
        </li>
        <li>
          <p>
            <em>[I]nstall</em> - this is where the action is.
The menu items above only affect dselect's package listings and status
database.
This one actually goes out and downloads and installs the packages you
have requested.
It also removes the packages you have deselected in the browser.
</p>
        </li>
        <li>
          <p>
            <em>[C]onfig</em> and <em>[R]emove</em> - these are relics from the
time before apt.
You do not need them, although they won't do harm.
</p>
        </li>
        <li>
          <p>
            <em>[Q]uit</em> - now that should really be obvious.
</p>
        </li>
      </ul>
      <p>
You'll spend most of your time with dselect in the package browser,
reachable through the "[S]elect" menu item.
Before dselect shows you the package list, it presents you with an
introductory help screen.
You can press 'k' to get a full listing of keyboard commands, or just
Space to get to the package list.
</p>
      <p>
You can move through the list using the up and down keys.
Selections are made with '+' and '-'.
When you select a package that needs some other packages, dselect will
show you a sublist with the affected packages.
In most cases you can just press Return to accept dselect's choices.
You can also make adjustments in the sublist (e.g. to choose another
alternative for a virtual package dependency), or press 'R'
(i.e. Shift-R) to return to the previous state.
Both the sublists and the main package list are left by pressing
Return.
When you're happy with your selections, leave the main list and use
the "[I]nstall" menu item to actually install the packages.
</p>
    </section>
    <section name="bin-apt">
      <title>Installing Binary Packages with
apt-get</title>
      <p>
        <code>dselect</code> doesn't actually download the packages itself.
Instead, it runs apt to do the dirty work.
If you prefer a pure command line interface, you can access the
functions of apt directly, with the <code>apt-get</code> command.
</p>
      <p>
Like with dselect, you must first download the current listing of
available packages with this command:
</p>
      <codeblock>sudo apt-get update</codeblock>
      <p>
Like the "[U]pdate" menu item in dselect, this doesn't update the
actual files on your computer, just apt's list of available packages.
To install a package, you just give apt-get the name, like this:
</p>
      <codeblock>sudo apt-get install lynx</codeblock>
      <p>
If apt-get determines that the packages requires other packages to be
installed, it will show you the list and ask for confirmation.
It then downloads and installs the requested packages.
Removing packages is just as easy:
</p>
      <codeblock>sudo apt-get remove lynx</codeblock>
      <p>
<!-- [FIXME: using apt-cache to search for packages] -->      </p>
    </section>
    <section name="bin-exceptions">
      <title>Installing Dependent Packages that are Unavailable in the Binary Distribution</title>
      <p>Sometimes, when doing a binary install, you may get messages that a dependency can't be installed. e.g.:</p>
      <codeblock>Sorry, but the following packages have unmet
dependencies:
foo: Depends: bar (&gt;= version) but it is
not installable
E: Sorry, broken packages</codeblock>
      <p>What has happened is that the package you are trying to install depends on another package that can't be distributed as a binary, due to licensing requirements.  You must install the dependency from source (see the next section).</p>
    </section>
    <section name="src">
      <title>Installing Binary and Source Packages with fink</title>
      <p>
The <code>fink</code> tool will allow you to install packages that are not yet
available in the <xref chapter="intro" section="src-vs-bin">binary
distribution</xref>.
      </p>
      <p>First of all, you'll need an appropriate version of the Developer Tools for your system.  The latest version is available for free download after registration at <link url="http://connect.apple.com">http://connect.apple.com</link>.  </p>
      <p>
To get a list of packages that are available for installation from
source, ask the <code>fink</code> tool:
</p>
      <codeblock>fink list</codeblock>
      <p>
The first column lists the installation state (blank for not
installed, <code>i</code> for installed, <code>(i)</code> for
installed but not the latest version), followed by the package name,
the latest version, and a short description.
You can ask for more information about a specific package using the
"describe" command ("info" is an alias for this):
</p>
      <codeblock>fink describe xmms</codeblock>
      <p>
When you have found a package that you want to install, use the
"install" command:
</p>
      <codeblock>fink install wget-ssl</codeblock>
      <p>
The <code>fink</code> command will first check if all necessary
prerequisites ("dependencies") are present, and will ask you if it's
okay to install them if some are missing.
Then it goes ahead and downloads source code, unpacks it, patches it,
compiles it, and installs the results on your system.
This can take a long time.
If you run into errors during that process, please first check the
<link url="/faq/">FAQ</link>.
      </p>
      <p>
You can tell <code>fink</code> to try to download
pre-compiled binary packages, if available, instead of building them. Just pass
the <xref chapter="usage" section="options">--use-binary-dist (or -b)
option</xref> to <code>fink</code>. This can save you a lot of time. E.g.
calling
      </p>
      <codeblock>fink --use-binary-dist install wget-ssl</codeblock>
      <p>or</p>
      <codeblock>fink -b install wget-ssl</codeblock>
      <p>
will first download all dependencies for wget-ssl that are available from the
binary distribution and only build the remainder from source. This option can
also be enabled permanently in the <xref chapter="conf">Fink configuration
file</xref> (fink.conf) or by running the command <code>fink configure</code>.
      </p>
      <p>
More details about the <code>fink</code> tool are available in the chapter 
<xref chapter="usage">"Using the fink Tool from the Command Line"</xref>.
      </p>
    </section>
    <section name="fink-commander">
      <title>Fink Commander</title>
      <p>Fink Commander is an Aqua interface to both <code>apt-get</code> and the <code>fink</code> tool.  The Binary menu lets you do operations on the binary distribution, and the Source menu does the same thing for the source distribution.</p>
      <p>Fink Commander is included with the Fink binary installer.  To download it separately (e.g. if you've bootstrapped Fink from source), or for additional information, visit the <link url="http://finkcommander.sourceforge.net">Fink Commander website</link>.</p>
    </section>
    <section name="available-versions">
      <title>Available versions</title>
      <p>When you want to install a package, you should first check the <link url="http://pdb.finkproject.org/pdb/index.php">package database</link> and see if it is available at all through Fink.  The available version(s) of the package will be shown in several rows of a table.  These are:</p>
      <ul>
        <li>Binary Distribution
          <ol>
            <li><p><em>0.8.1:</em>  This is the base version that can be installed from binaries for OS 10.4.  If you <xref chapter="install" section="bin">update</xref> Fink, later versions of some packages may be available.</p></li>
            <li><p><em>&fink_version;:</em>  This is the base version that can be installed from binaries for OS 10.5.  If you <xref chapter="install" section="bin">update</xref> Fink, later versions of some packages may be available.</p></li>
          </ol></li>
        <li>CVS/rsync Distributions
          <ol>
            <li><p><em>10.4/powerpc stable:</em>  This is the most recent version that can be installed from the stable source tree for OS 10.4 users 
on PowerPC hardware.</p></li>
            <li><p><em>10.4/intel stable:</em>  This is the most recent version that can be installed from the stable source tree for OS 10.4 users
on intel hardware.</p></li>
            <li><p><em>10.4/powerpc unstable:</em>  This is the most recent version that can be installed from the unstable source tree for OS 10.4 users
on PowerPC hardware.</p></li>
            <li><p><em>10.4/intel unstable:</em>  This is the most recent version that can be installed from the unstable source tree for OS 10.4 users
on intel hardware.</p>
                <p>Note:  <em>unstable</em> doesn't necessarily mean <em>unusable</em>, but install such packages at your own risk.</p>
</li>
            <li><p><em>10.5/powerpc stable:</em>  This is the most recent version that can be installed from the stable source tree for OS 10.5 users 
on PowerPC hardware.</p></li>
            <li><p><em>10.5/intel stable:</em>  This is the most recent version that can be installed from the stable source tree for OS 10.5 users
on intel hardware.</p></li>
            <li><p><em>10.5/powerpc unstable:</em>  This is the most recent version that can be installed from the unstable source tree for OS 10.5 users
on PowerPC hardware.</p></li>
            <li><p><em>10.5/intel unstable:</em>  This is the most recent version that can be installed from the unstable source tree for OS 10.5 users
on intel hardware.</p></li>
          </ol></li>
      </ul>
    </section>
    <section name="x11">
      <title>Getting X11 Sorted Out</title>
      <p>Many of the packages that are available via Fink require the installation of some form of X11.  Because of this, one of the first things that is typically done is to choose an X11 implementation.</p>
      <p>
Since there are several X11 implementations available for Mac OS X
(Apple's X11, XFree86, X.org) and several ways to install them
(manually or via Fink), there are several alternative packages - one
for each setup. 
Here is a list of the available X11 packages and installation methods:
</p>
      <ul>
        <li>
          <p>
            <em>xfree86, xfree86-shlibs:</em>
Install both of these packages for XFree86-4.5.0 (OS 10.4 only).  
</p>
        </li>
        <li><p><em>xorg, xorg-shlibs</em> (OS 10.4 only )  Install these packages to get the 6.8.2 release of the X.org X11 distribution.</p></li>
        <li>
          <p>
<em>system-xfree86 + -shlibs, -dev:</em>
These packages are automatically generated if you install Apple's X11, or manually installed XFree86 or X.org.  
They will then act as
dependency placeholders.
</p>
        </li>
      </ul>
      <p>
For more information on installing and running X11, refer to the
<link url="/doc/x11/">X11 on Darwin
and Mac OS X document</link>.
</p>
    </section>
  </chapter>
  <chapter filename="upgrade">
    <title>Upgrading Fink</title>
    <shorttitle>Upgrade</shorttitle>
    <preface>
      <p>
This chapter covers the procedures used to update your Fink
installation with the latest and greatest stuff.
</p>
    </preface>
    <section name="bin">
      <title>Upgrading using Binary Packages</title>
      <p>
If you use the binary distribution exclusively, there is no separate
upgrade procedure.
Just ask the tool of your choice to get the latest package listing
from the server and let it update all packages.
</p>
      <p>
For dselect, it is sufficient to hit "[U]pdate", then "[I]nstall".
Of course, you may want to run "[S]elect" in between to check the
selections that were made and to find out about new packages.
</p>
      <p>
For apt, run <code>apt-get update</code> to get the latest package
list, then <code>apt-get upgrade</code> to update all packages that
have new versions available.
</p>
      <p>For Fink Commander, select Binary-&gt;Update descriptions to update the package list, and then Binary-&gt;Dist-Upgrade packages to update to new versions.</p>
      <p>
For more information, see the
<link url="/download/upgrade.php">Upgrade Matrix</link>.
</p>
    </section>
    <section name="src">
      <title>Upgrading the Source Distribution</title>
      <p>
If you use the source distribution the procedure consists of two steps.
In the first step, you download the latest package descriptions to
your computer.
In the second step, these package descriptions are used to compile new
packages; the actual source code is downloaded as needed.
</p>
      <p>
The first step can be accomplished by
running <code>fink selfupdate</code>.
That command will check with the Fink website to see if a new point
release is available, and will automatically download and install the
package descriptions in that case.
You also have the
option to pull package descriptions directly from Git or via rsync.
Git is a version-controlled repository where the package descriptions
are stored and managed.
Using Git has the advantage that it is updated continuously, but the disadvantage that there is a single Git server for Fink, and it can be unreliable if there is a lot of traffic.  For this reason, it is recommended that general users go with rsync.  There are multiple mirrors available for rsync, and the only disadvantage is that package descriptions take an hour or so to migrate to the rsync mirrors after they've been added to Git.
</p>
      <p>(If you are having trouble upgrading a source installation, consult
<link url="/download/fix-upgrade.php">these
special instructions</link>.)</p>
      <p>
Once you have updated your package descriptions (no matter which way),
you should update all packages at once with the command <code>fink
update-all</code>.
</p>
      <p>To update the source distribution using Fink Commander, select Source-&gt;Selfupdate to download new package information files, and then Source-&gt;Update-all to update your outdated packages.</p>
    </section>
    <section name="mix">
      <title>Mixing Binaries and Source</title>
      <p>
If you use precompiled binary packages for some packages and build
others from source, you'll have to follow both sets of instructions
above to upgrade your Fink installation.
That is, first use <code>dselect</code> or <code>apt-get</code> to get
the latest versions of the packages that are available as binaries,
then use <code>fink selfupdate</code> and <code>fink update-all</code>
to get the current package descriptions and to update the remaining
packages.
		</p>
      <p>
You may use the UseBinaryDist option (settable via the
<xref chapter="usage" section="options">--use-binary-dist (or -b) option</xref>
or in the <xref chapter="conf">Fink configuration file</xref>) both source and
binary descriptions will be updated if you call <code>fink selfupdate</code>.
In this case you don't need a separate <code>apt-get</code> call anymore.
     </p>
      <p>
If you are using Fink Commander select Binary-&gt;Update descriptions to update
the package list, and then Binary-&gt;Dist-Upgrade packages to update to new
versions. After that do Source-&gt;Selfupdate to download new package
information files, and then Source-&gt;Update-all (see previous sections for
details).
      </p>
    </section>
  </chapter>
  <chapter filename="conf">
    <title>The Fink Configuration File</title>
    <shorttitle>fink.conf</shorttitle>
    <preface>
      <p>
This chapter explains the settings available in the Fink configuration
file (fink.conf) and how they influence the behaviour of Fink, specifically the <code>fink</code> command-line tool (i.e. mainly working with the source distribution).
</p>
    </preface>
    <section name="about">
      <title>About fink.conf</title>
      <p>
When Fink is initially installed it prompts you for the answers to some
questions to set up your configuration file, such as which <xref section="mirrors">mirrors</xref> you want to use for downloading files
and how to acquire super-user rights. You can re-run this process by
calling the <code>fink configure</code> command. In order to set some
options, you may need to edit your <em>fink.conf</em> file by hand. In
general, these options are meant for advanced users only.
</p>
      <p>
The <em>fink.conf</em> file is located at
<code>/sw/etc/fink.conf</code>, and can be edited in your favourite
text editor. You will need super-user rights to edit it.
</p>
    </section>
    <section name="syntax">
      <title>fink.conf syntax</title>
      <p>
Your fink.conf file consists of multiple lines, in the format:</p>
      <codeblock>OptionName: Value</codeblock>
      <p>Options are one per line, and the option name is separated from its
value by a : and a single space. The contents of value depends on the
option, but it is normally either a boolean ("True" or "False"), a
string, or a list of strings delimited by a space. 
For example:
</p>
      <codeblock>
BooleanOption: True
StringOption: Something
ListOption: Option1 Option2 Option3
</codeblock>
    </section>
    <section name="required">
      <title>Required Settings</title>
      <p>
Some of the settings in the <code>fink.conf</code> file are mandatory. Without
them Fink cannot function properly. The following settings belong to
this category.
</p>
      <ul>
        <li>
          <p>
            <em>Basepath:</em> path</p>
          <p>
Tells <em>fink</em> where it was installed. Defaults to <em>/sw</em> unless you
changed it during the initial installation of the Fink distribution. You should
<em>not</em> change this value after installation, it will confuse <em>fink</em>.
</p>
        </li>
      </ul>
    </section>
    <section name="optional">
      <title>Optional User Settings</title>
      <p>
There are various optional settings which users can customize to change
the behaviour of Fink.
</p>
      <ul>
        <li>
          <p>
            <em>RootMethod:</em> su or sudo or none</p>
          <p>For some operations, Fink needs super user rights. Recognized values
are <em>sudo</em> or <em>su</em>. You can also set this to
<em>none</em>, in which case you must run Fink as root yourself. The
default value is <em>sudo</em> and in most cases it should not be
changed.</p>
        </li>
        <li>
          <p>
            <em>Trees:</em> list of trees</p>
          <p>Available trees are:</p>
          <codeblock>
local/main      - any local packages you want to install
local/bootstrap - packages used during the installation of Fink
stable/crypto   - stable cryptographic packages
stable/main     - other stable packages
unstable/crypto - unstable cryptographic packages
unstable/main   - other unstable packages
</codeblock>
          <p>
You may also add your own trees in <code>/sw/fink/dists</code> for your own purposes, but this is not necessary in most
circumstances. The default trees are "local/main local/bootstrap
stable/main". This list is automatically kept in sync with the
<code>/sw/etc/apt/sources.list</code> file.</p><p>The order of the trees is meaningful, as packages from later trees in the list may
           override packages from earlier ones.</p>
        -</li>
        <li>
          <p>
            <em>Distribution:</em> 10.4</p>
<!-- I'm not sure how much of the following paragraph should be rewritten to reflect current supported versions-->          <p>Fink needs to know which version of Mac OS X you are
running. Mac OS X 10.0 and earlier are not supported, and 10.1 and 10.2 are no
longer supported by current versions of <code>fink</code>. Mac OS X 10.2 users are 
restricted to fink-0.24.7, released in June 2005.  This
field is set by running the <code>/sw/lib/fink/postinstall.pl</code>
script. You should not need to alter this value manually.
</p>
        </li>
        <li>
          <p>
            <em>FetchAltDir:</em> path</p>
          <p>usually <code>fink</code> will store the sources it fetches in
<code>/sw/src</code>. You can specify an alternate directory to look for
downloaded source code in using this option. For example:
</p>
          <codeblock>FetchAltDir: /usr/src</codeblock>
        </li>
        <li>
          <p>
            <em>Verbose:</em> a number from 0 to 3</p>
          <p>
This option sets how much information Fink tells you about what it is
doing. The values are:
<em>0</em>
            <tt>Quiet</tt> (don't show download stats)
<em>1</em>
            <tt>Low</tt> (don't show tarballs being expanded)
<em>2</em>
            <tt>Medium</tt> (shows almost everything)
<em>3</em>
            <tt>High</tt> (shows everything)
The default value is 1.
</p>
        </li>
        <li><p><em>SkipPrompts:</em> a comma-delimited list</p><p>(<code>fink-0.25</code> and later) This option instructs <code>fink</code> to refrain from asking for input when
           the user does not want to be prompted. Each prompt belongs to a
           category. If a prompt's category is in the SkipPrompts list then
           the default option will be chosen within a very short period of
           time.</p><p>Currently, the following categories of prompts exist:</p><p><em>fetch</em> - Downloads and mirrors</p><p><em>virtualdep</em> - Choosing between alternative packages</p><p> By default, no prompts are skipped.</p></li>
        <li>
          <p>
            <em>NoAutoIndex:</em> boolean</p>
          <p>Fink caches its package description files in /sw/var/db/fink.db to
save it having to read and parse them all every time it runs. Fink
checks whether or not the package index needs to be updated unless this
option is set to "True". It defaults to "False" and it is not
recommended that you change it. If you do, you may need to run
the <code>fink index</code> command manually to update the index.</p>
        </li>
        <li>
          <p>
            <em>SelfUpdateNoCVS:</em> boolean</p>
          <p>The command <code>fink selfupdate</code> upgrades Fink package
manager to the latest release. This option makes sure that the
Concurrent Version System (CVS) is not used to achieve this when set to
<tt>True</tt>. It is set automatically by the <code>fink
selfupdate-cvs</code> command, so you should not need to change it
manually.</p>
        </li>
        <li>
	  <p>
	    <em>Buildpath:</em> path</p>
	  <p>Fink needs to create several temporary directories for
each package it compiles from source. By default, they are placed
in <filename>/sw/src</filename> on Panther and earlier, and 
<filename>/sw/src/fink.build</filename> on Tiger. If you want them to be
somewhere else, specify the path here. See the descriptions of
the <code>KeepRootDir</code> and <code>KeepBuildDir</code> fields
 in the <xref section="developer">Developer Settings</xref> section of this document for more information about these temporary
directories.
	    </p>
	    <p>On Tiger, it is recommended that the Buildpath end with <filename>.noindex</filename>
or <filename>.build</filename>. Otherwise, Spotlight will attempt to index the temporary files in
the Buildpath, slowing down builds.
    	</p>
	</li>
        <li><p><em>Bzip2Path:</em> the path to your <filename>bzip2</filename> (or compatible) binary
          </p><p>(<code>fink-0.25</code> and later) The Bzip2Path option lets you override the default path for the
           <filename>bzip2</filename> command-line tool.  This allows you to specify an alternate
           location to your <filename>bzip2</filename> executable, pass optional command-line
           options, or use a drop-in replacement like <filename>pbzip2</filename> for decompressing
           <filename>.bz2</filename> archives.</p></li>
      </ul>
    </section>
    <section name="downloading">
      <title>Download Settings</title>
      <p>There are various settings which influence the way Fink downloads
package data.</p>
      <ul>
        <li>
          <p>
            <em>ProxyPassiveFTP:</em> boolean</p>
          <p>This option makes Fink use "passive" mode for FTP downloads. Some
FTP server or network configurations require this option to be set to
<tt>True</tt>. It is recommended that you leave this option on at all
times since active FTP is deprecated.</p>
        </li>
        <li>
          <p>
            <em>ProxyFTP:</em> url</p>
          <p>If you use a FTP proxy then you should enter its address here, for
example:</p>
          <codeblock>ProxyFTP: ftp://yourhost.com:2121/</codeblock>
          <p>Leave it blank if you do not use a FTP proxy.</p>
        </li>
        <li>
          <p>
            <em>ProxyHTTP:</em> url</p>
          <p>If you use a HTTP proxy then you should enter its address here, for
example:</p>
          <codeblock>ProxyHTTP: http://yourhost.com:3128/</codeblock>
          <p>Leave if blank if you do not use a HTTP proxy.</p>
        </li>
        <li>
          <p>
            <em>DownloadMethod:</em> wget or curl or axel or axelautomirror</p>
          <p>Fink can use three different applications to download files from the
Internet - <em>wget</em>, <em>curl</em>, or <em>axel</em>. The value
<em>axelautomirror</em> uses an experimental mode of the <em>axel</em>
application which tries to determine the closest server that has a
certain file. The use of <em>axel</em> and <em>axelautomirror</em> are not recommended at this
time. The default value is <em>curl</em>.
<em>The application you chose as DownloadMethod MUST be installed!</em> (i.e. <code>fink</code> won't fall back to <em>curl</em> if you try to use a download application that isn't present.
          </p>
        </li>
        <li>
          <p>
            <em>SelfUpdateMethod:</em> point, rsync or git</p>
          <p>
<code>fink</code> can use some different methods to update the package info files.
<em>rsync</em> is the recommended setting; it uses rsync to download only
modified files in the <xref section="optional">trees</xref> that you have enabled. Note that if you have
changed or added to files in the <code>stable</code> or <code>unstable</code> trees, using rsync will
delete them. Make a backup first, e.g. in your <code>local</code> tree. <em>git</em> will download using anonymous or
Github access from the Fink repository. This has the disadvantage that git
can not switch mirrors; if the server is unavailable you will not be able to
update. <em>point</em> will download only the latest released version of the
packages. It is not recommended as your packages may be quite out of date.
          </p>
        </li>
        <li><p><em>SelfUpdateCVSTrees:</em> list of trees
           </p><p>(<code>fink-0.25</code> and later) By default, the <em>cvs</em> selfupdate method will update only the current
           distribution's tree.  This option overrides the list of distribu-
           tion versions that will be updated during a selfupdate.

           Please note that you will need a recent "cvs" binary installed if
           you wish to include directories that do not have CVS/ directories
           in their entire path (e.g., dists/local/main or similar).</p></li>
        <li>
          <p>
            <em>UseBinaryDist:</em> boolean</p>
          <p>
Causes <code>fink</code> to try to download pre-compiled binary packages from the binary
distribution if available and if the binary package is not already on the
system. This can save a lot of installation time and it is therefore 
recommended to set this option. Passing fink the 
<xref chapter="usage">--use-binary-dist</xref> option (or the <code>-b</code> flag) has the same effect,  
but only operates on that single <code>fink</code> invocation.  Passing <code>fink</code> the
           <code>--no-use-binary-dist</code> flag overrides this, and compiles from source
           for that single <code>fink</code> invocation.
          </p><p>Note that this mode instructs <code>fink</code> to download an available binary  
           if that version is the latest available version of the package; it does <em>not</em> cause <code>fink</code>
           to choose a version based on its binary availability.
</p>
        </li>
      </ul>
    </section>
    <section name="mirrors">
      <title>Mirror Settings</title>
      <p>Getting software from the Internet can be a tedious thing and often
downloads are not as fast as we would like them to be. Mirror servers
host copies of files available on other servers, but may have a faster
connection to the Internet or be geographically closer to you, thus
enabling you to download files faster. They also help reduce load on
busy primary servers, for example <em>ftp.gnu.org</em>, and they
provide an alternative should one server not be reachable.</p>
      <p>In order for Fink to pick the best mirror for you, you must tell it
which continent and which country you reside in. If downloads from one
server fail, it will prompt you if you want to retry from the same
mirror, a different mirror in the same country or continent, or a
different mirror anywhere in the world.</p>
      <p>The <em>fink.conf</em> file holds settings about which mirrors you
would like to use.</p>
      <ul>
        <li>
          <p>
            <em>MirrorContinent:</em> three letter code</p>
          <p>You should change this value using the <code>fink configure</code>
command. The three letter code is one found in
<code>/sw/lib/fink/mirror/_keys</code>.
For example, if you live in Europe:</p>
          <codeblock>MirrorContinent: eur</codeblock>
        </li>
        <li>
          <p>
            <em>MirrorCountry:</em> six letter code</p>
          <p>You should change this value using the <code>fink configure</code>
command. The three letter code is one found in
<code>/sw/lib/fink/mirror/_keys</code>.
For example, if you live in Austria:</p>
          <codeblock>MirrorCountry: eur-AT</codeblock>
        </li>
        <li>
          <p>
            <em>MirrorOrder:</em> MasterFirst or MasterLast or MasterNever or ClosestFirst</p>
          <p>
Fink supports 'Master' mirrors, which are mirrored repositories of the source
tarballs for all Fink packages. The advantage of using the Master mirror set is that 
the source download URLs will never break. Users can choose to use 
these mirrors which are maintained by the Fink team, or to use only the original 
source URLs and external mirror sites such as the gnome, KDE, and debian mirror sites.
Additionally users can choose to combine the two sets, which are then searched in proximity order, as 
documented above. When using the MasterFirst or MasterLast options, the user can 'skip ahead' 
to the Master (or non Master) set if a download fails. The options are:
</p>
          <codeblock>
MasterFirst - Search "Master" source mirrors first.
MasterLast - Search "Master" source mirrors last.
MasterNever - Never use "Master" source mirrors.
ClosestFirst - Search closest source mirrors first (combine all mirrors into one set).
</codeblock>
        </li>
        <li><p><em>Mirror-rsync:</em>
           </p><p>(<code>fink-0.25.2</code> and later) When doing <code>fink selfupdate</code> with the <em>SelfupdateMethod</em> set to <code>rsync</code>,
           this is the rsync url to sync from.  This should be an anonymous
           rsync url, pointing to a directory which contains all the fink Dis-
           trubutions and Trees.
</p></li>
      </ul>
    </section>
    <section name="developer">
      <title>Developer Settings</title>
      <p>Some options in the  <code>fink.conf</code> file are only useful to
developers. We do not recommend that conventional Fink users modify
them. The following options fall into this category.</p>
      <ul>
        <li>
          <p>
            <em>KeepRootDir:</em> boolean</p>
          <p>Causes <code>fink</code> not to delete the directory <filename>root-[name]-[version]-[revision]</filename> in the <em>Buildpath</em>
after building a package. Defaults to false. <em>Be careful, this
option can fill your hard-disk quickly!</em>
Passing <code>fink</code> the <em>-K</em> flag has the same effect, but
only operates on that single <code>fink</code> invocation.
          </p>
        </li>
        <li>
          <p>
            <em>KeepBuildDir:</em> boolean</p>
           <p>Causes <code>fink</code> not to delete the directory <filename>[name]-[version]-[revision]</filename> in the <em>Buildpath</em>
after building a package. Defaults to false. <em>Be careful, this
fill your hard-disk quickly!</em>
Passing <code>fink</code> the <em>-k</em> flag has the same effect, but
only operates on that single <code>fink</code> invocation.
          </p>
        </li>
      </ul>
    </section>
    <section name="advanced">
      <title>Advanced Settings</title>
      <p>There are some other options which may be useful, but require some knowledge to get right.</p>
      <ul>
        <li>
          <p>
            <em>MatchPackageRegEx:</em> </p>
          <p>Causes fink not to ask which package to install if one (and only one) of the choices matches the perl Regular Expression given here. Example:</p>
          <codeblock>MatchPackageRegEx: (.*-ssl$|^xfree86$|^xfree86-shlibs$)</codeblock>
          <p>will match packages ending in '-ssl', and will match 'xfree86' and 'xfree86-shlibs' exactly.</p>
        </li>
        <li>
          <p>
            <em>CCacheDir:</em> path</p>
          <p>If the Fink package <code>ccache-default</code> is installed, the cache files it makes
while building Fink packages will be placed here. Defaults to <filename>/sw/var/ccache</filename>. If set to <code>none</code>, fink will not set the CCACHE_DIR environment variable and ccache will use <filename>$HOME/.ccache</filename>, potentially putting root-owned files into your home directory.
<em>Only available in fink newer than version 0.21.0</em>.
          </p>
        </li>
        <li><p><em>NotifyPlugin:</em> plugin</p><p>
           Specify a notification plugin to tell you when packages have been
           installed/uninstalled.  Defaults to Growl (requires <code>Mac::Growl</code> to
           operate).  Other plugins can be found in the
           <filename>/sw/lib/perl5/Fink/Notify</filename> directory.  On <code>fink-0.25</code> and later they are listed in the output of <code>fink plugins</code>.  See the <link url="http://wiki.finkproject.org/index.php/Fink:Notificati on_Plugins">Fink Developer Wiki</link> for more information.
</p></li>
        <li><p><em>AutoScanpackages:</em> boolean
           </p><p>When <code>fink</code> builds new packages, <code>apt-get</code> does not immediately know about
           them.  Historically, the command <code>fink scanpackages</code> had to be run
           for <code>apt-get</code> to notice the new packages, but now this happens auto
           matically. If this option is present and <em>false</em>, then <code>fink
           scanpackages</code> will no longer be run automatically after packages are
           built.  Defaults to <em>true</em>.
</p></li>
        <li><p><em>ScanRestrictivePackages:</em> boolean
           </p><p>When scanning the packages for <code>apt-get</code>, <code>fink</code> normally scans all
           packages in the current trees. However, if the resulting apt repository will be made publically available, the administrator may be
           legally obligated not to include packages with <code>Restrictive</code> or
           <code>Commercial</code> licenses. If this option is present and <em>false</em>, then Fink
           will omit those packages when scanning.
</p></li>
      </ul>
    </section>
    <section name="sourceslist">
      <title>Managing apt's sources.list file</title>
      <p>Fink actively manages the file
<code>/sw/etc/apt/sources.list</code> which is used by apt to locate
binary files for installation.  The default sources.list file looks 
something like this, adjusted to match your Distribution and Trees:
</p>
      <codeblock># Local modifications should either go above this line, or at the end.
#
# Default APT sources configuration for Fink, written by the fink program

# Local package trees - packages built from source locally
# NOTE: this is automatically kept in sync with the Trees: line in 
# /sw/etc/fink.conf
# NOTE: run 'fink scanpackages' to update the corresponding Packages.gz files
deb file:/sw/fink local main
deb file:/sw/fink stable main crypto

# Official binary distribution: download location for packages
# from the latest release
deb http://us.dl.sourceforge.net/fink/direct_download 10.3/release main crypto

# Official binary distribution: download location for updated
# packages built between releases
deb http://us.dl.sourceforge.net/fink/direct_download 10.3/current main crypto

# Put local modifications to this file below this line, or at the top.
</codeblock>
      <p>With this default file, apt-get first looks in your local installation
for already-compiled binaries, and then looks in the official binary
distribution.  You can alter this by making entries at the beginning of
the file (which will be searched first) or at the end of the file (which
will be searched last).</p>
      <p>If you change your Trees line or the Distribution you are using,
fink will automatically modify the "default" portion of the file to
correspond to the new values.  Fink will, however, preserve any local
modifications you have made to the file, provided that you confine your
modifications to the top of the file (above the first default line) and
the bottom of the file (below the last default line).
</p>
    </section>
  </chapter>
  <chapter filename="usage">
    <title>Using the fink Tool from the Command Line</title>
    <shorttitle>fink Tool</shorttitle>
    <section name="using">
      <title>Using the fink tool</title>
      <p>The <code>fink</code> tool uses several suffix commands to work on packages from the source distribution. 
Some of them need at
least one package name, but can handle several package names at
once. You can specify just the package name (e.g. gimp), or a fully
qualified name with a version number (e.g. gimp-1.2.1) or with both version and revision numbers (e.g. gimp-1.2.1-3). Fink will automatically choose the latest available
version and revision when they are not specified.  Others have different options.</p>
      <p>What follows is a list of the commands for the <code>fink</code> tool:</p>
    </section>
    <section name="options">
      <title>Global options</title>
      <p>
There are some options, which apply to all fink commands. If you 
type <code>fink --help</code> you get the list of options: 
      </p>
      <p>(as of <code>fink-0.26.0</code>)</p>
      <p><em>-h, --help</em> - displays help text.
</p>
      <p><em>-q, --quiet</em>  - causes <code>fink</code> to be less verbose, opposite of <em>--verbose</em>.  Overrides the <xref chapter="conf" section="optional">Verbose</xref> flag in <filename>fink.conf</filename>.
</p>
      <p><em>-V, --version</em> - display version information.
</p>
      <p><em>-v, --verbose</em> - causes  <code>fink</code> to be more verbose, opposite of <em>--quiet</em>.  Overrides the <xref chapter="conf" section="optional">Verbose</xref> field in <filename>fink.conf.</filename>
</p>
      <p><em>-y, --yes</em> - assume default answer for all interactive 
                        questions.
</p>
      <p><em>-K, --keep-root-dir</em>   - Causes <code>fink</code> not to delete the
                        <filename>root-[name]-[version]-[revision]</filename>
		        directory in the <xref chapter="conf" section="optional">Buildpath</xref> after building a package.  Corresponds to the <xref chapter="conf" section="developer">KeepRootDir</xref> field in <filename>fink.conf</filename>.
</p>
      <p><em>-k, --keep-build-dir</em>  - Causes <code>fink</code> not to delete the
                        <filename>[name]-[version]-[revision]</filename>
                        directory in the <xref chapter="conf" section="optional">Buildpath</xref> after building a package.  Corresponds to the <xref chapter="conf" section="developer">KeepBuildDir</xref> field in <filename>fink.conf</filename>.</p>
      <p><em>-b, --use-binary-dist</em> - download pre-compiled packages from the binary 
                        distribution if available (e.g. to reduce compile
		        time or disk usage).
		        Note that this mode instructs fink to download the
                        version it wants if that version is available for
		        download; it does not cause fink to choose a version
    		        based on its binary availability.  Corresponds to the <xref chapter="conf" section="downloading">UseBinaryDist</xref> flag in <filename>fink.conf</filename>.
</p>
      <p><em>--no-use-binary-dist</em>  - Don't use pre-compiled binary packages from the binary 
		        distribution, opposite of the --use-binary-dist flag. 
                        This is the default unless overridden by setting <code>UseBinaryDist: true </code>in 
                        the <filename>fink.conf</filename> configuration file. 
</p>
      <p><em>--build-as-nobody</em>     - Drop to a non-root user when performing the unpack,
                        patch, compile, and install phases. Note that packages
                        built with this option may be non-functional. You
                        should use this mode for package development and 
                        debugging only.
</p>
      <p><em>-m, --maintainer</em>
            - (<code>fink-0.25</code> and later) Perform actions useful to package maintainers: run validation on
           the <filename>.info</filename> file before building and on the <filename>.deb</filename> after building a
           package; turn certain build-time warnings into fatal errors; (<code>fink-0.26</code> and later) run the test suites as specified in the  field.  This sets <em>--tests</em> and <em>--validate</em> to <code>on</code>.</p>
      <p><em>--tests[=on|off|warn]</em>         - (<code>fink-0.26.0</code> and later) Causes <code>InfoTest</code> fields to be activated and test suites specified
           via <code>TestScript</code> to be executed (see the <varlink url="../packaging/reference.php#fields" varurl="../packaging/packaging.en.html#reference.fields">Fink Packaging Manual</varlink>).  If no argument is given to this
           option or if the argument is <code>on</code> then failures in test suites will
           be considered fatal errors during builds.  If the argument is <code>warn</code>
           then failures will be treated as warnings.</p>
      <p><em>--validate[=on|off|warn]</em> -
           Causes packages to be validated during a build.  If no argument is
           given to this option or if the argument is <code>on</code> then validation failures will be considered fatal errors during builds.  If the argument is <code>warn</code> then failures will be treated as warnings.</p>
      <p><em>-l, --log-output</em>
            - Save a copy of the terminal output during each package building
           process. By default, the file is stored in
           <filename>/tmp/fink-build-log_[name]-[version]-[revision]_[date]-[time]</filename> but
           one can use the <em>--logfile</em> flag to specify an alternate filename.</p>
      <p><em>--no-log-output</em>
            - Don't save a copy of the output during package-building, opposite
           of the <em>--log-output</em> flag. This is the default.</p>
      <p><em>--logfile=filename</em>
            - Save package build logs to the file <filename>filename</filename> instead of the default
           file (see the <em>--log-output</em> flag, which is implicitly set by the
           <em>--logfile</em> flag). You can use percent-expansion codes to include
           specific package information automatically. A complete list of percent-expanions is available in the <varlink url="../packaging" varurl="../packaging/packaging.en.html">Fink Packaging Manual</varlink>; some common percent-expansions are:</p>
      <ul>
        <li>                 <em>%n</em>    - package name
                 </li>
        <li><em>%v</em>    - package version
                 </li>
        <li><em>%r</em>    - package revision</li>
      </ul>
      <p><em>-t, --trees=expr</em>
           - Consider only packages in trees matching <em>expr</em>.

           The format of expr is a comma-delimited list of tree specifica-
           tions. Trees listed in <filename>fink.conf</filename> are compared against <em>expr</em>.  Only
           those which match at least one tree specification are considered by
           <code>fink</code>, in the order of the first specifications which they match. If
           no <em>--trees</em> option is used, all trees listed in <filename>fink.conf</filename> are
           included in order.

           A tree specification may contain a slash (/) character, in which
           case it requires an exact match with a tree. Otherwise, it matches
           against the first path-element of a tree. For example,
           <em>--trees=unstable/main</em> would match only the <em>unstable/main</em> tree,
           while <em>--trees=unstable</em> would match both unstable/main and
           <em>unstable/crypto</em>.

           There exist magic tree specifications which can be included in
           <em>expr</em>:</p>
      <ul>
        <li><em>status</em>
                       - Includes packages in the dpkg status database.

                 </li>
        <li><em>virtual</em>
                       - Includes virtual packages which reflect the capabilities of the system.
</li>
      </ul>
      <p>Exclusion of (or failure to include) these magic trees is currently
           only supported for operations which do not install or remove packages.</p>
      <p><em>-T, --exclude-trees=expr</em>
           Consider only packages in trees not matching expr.

           The syntax of expr is the same as for <em>--trees</em>, including the magic
           tree specifications. However, matching trees are here excluded
           rather than included. Note that trees matching both <em>--trees</em> and
           <em>--exclude-trees</em> are excluded.
</p>
      <p> Examples of <em>--trees</em> and --exclude-trees:

                 </p>
      <ul>
        <li><code>fink --trees=stable,virtual,status install <em>foo</em></code> 
                       <p>Install <em>foo</em> as if <code>fink</code> was using the stable tree, even
                       if unstable is enabled in <filename>fink.conf</filename>.
</p></li>
        <li><code>fink --exclude-trees=local install <em>foo</em></code> 
                       <p>Install the version of <em>foo</em> in Fink, not the locally
                       modified version.

</p></li>
        <li><code>fink --trees=local/main list -i</code>
                       <p>List the locally modified packages which are installed.</p></li>
      </ul>
      <p>Most of these options are self-explanatory. Many can also be set in the 
<xref chapter="conf">Fink configuration file</xref> (<filename>fink.conf</filename>) if you want 
to set them permanently and not just for that invocation of <code>fink</code>.</p>
    </section>
    <section name="install">
      <title>install</title>
      <p>The <em>install</em> command is used to install packages. It downloads,
configure, builds and installs the packages you name. It will also
install required dependencies automatically, but will ask you for
confirmation before it does so. Example:</p>
      <codeblock>fink install nedit

Reading package info...
Information about 131 packages read.
The following additional package will be installed:
 lesstif
Do you want to continue? [Y/n]</codeblock>
      <p>Use of the <xref section="options">--use-binary-dist</xref> option with <code>fink install</code> can speed the build process for complicated packages by quite a lot.</p>
      <p>Aliases for the install command: <em>update, enable, activate, use</em> (most
of these for historic reasons).</p>
    </section>
    <section name="remove">
      <title>remove</title>
      <p>The remove command removes packages from the system by calling '<code>dpkg --remove</code>'. The current default implementation has a flaw: it
doesn't check dependencies itself but rather completely leaves that to
the dpkg tool (usually this poses no problem, though).</p>
      <p>The <em>remove</em> command only removes the actual package files,
(excluding configuration files), but leaves
the <filename>.deb</filename> compressed package file intact. This means that you can
re-install the package later without going through the compile process
again. If you need the disk space, you can remove the <filename>.deb</filename> from the
<filename>/sw/fink/dists</filename> tree.</p>
      <p>These flags can be used with the <em>fink remove</em> command
</p>
      <codeblock>-h,--help             - Show the options which are available.
-r,--recursive        - Also remove packages that depend on the package(s) to
                        be removed (i.e. overcome the above-mentioned flaw).</codeblock>
      <p>Aliases: <em>disable, deactivate, unuse, delete</em>.</p>
    </section>
    <section name="purge">
      <title>purge</title>
      <p>The <em>purge</em> command purges packages from the system. This is
the same as the <em>remove</em> command except that it removes configuration
files as well.</p>
      <p>This command takes the:</p>
      <codeblock>-h,--help
-r,--recursive</codeblock>
      <p>options.</p>
    </section>
    <section name="update-all">
      <title>update-all</title>
      <p>This command updates all installed packages to the latest version. It
does not need a package list, so you just type:</p>
      <codeblock>fink update-all</codeblock>
      <p><xref section="options">--use-binary-dist</xref> is also useful with this command.</p>
    </section>
    <section name="list">
      <title>list</title>
      <p>
This command produces a list of available packages, listing
installation status, the latest version and a short description.
If you call it without parameters, it will list all available
packages.
You can also pass a name or a shell pattern, and fink will list all
packages that match.
</p>
      <p>
The first column displays the installation state with the following
meanings:
</p>
      <codeblock>    not installed
 i  latest version is installed
(i) installed, but a newer version is available
 p  a virtual package provided by a package that is installed</codeblock>
      <p> The version column always lists the latest (highest) version known for the package, regardless of what version (if any) you have installed.  To see all versions of a package available on your system, use the <xref section="dumpinfo">dumpinfo</xref> command.</p>
      <p>
There are also some flags for the <code>fink list</code> command
</p>
      <codeblock>
-h,--help
	  Show the options which are available.
-t,--tab
	  Output the list in a tab delimited format, useful for
	  running the output through a script.
-i,--installed
	  Show only those packages which are currently installed.
-o,--outdated
	  Show only those packages which are out of date.
-u,--uptodate
	  Show only packages which are up to date.
-n,--notinstalled
	  Show packages which are not currently installed.
-s expr,--section=expr
	  Show only packages in the sections matching the regular
	  expression expr.
-m expr,--maintainer=expr
          Show only packages with the maintainer  matching the
          regular expression expr.
-w=xyz,--width=xyz
	  Sets the width of the display you would like the output
	  formatted for. xyz is either a numeric value or auto.
	  auto will set the width based on the terminal width.
	  The default is auto.
</codeblock>
      <p>
Some usage examples:
</p>
      <codeblock>
fink list                 - list all packages
fink list bash            - check if bash is available and what version.
fink list --tab --outdated | cut -f 2     
                          - just list the names of the out of date packages.
fink list --section=kde   - list the packages in the kde section
fink list --maintainer=fink-devel
                          - list the packages with no maintainer
fink --trees=unstable list --maintainer=fink-devel
                          - list the packages with no maintainer, but only in the unstable tree.
fink list "gnome*"        - list all packages that start with 'gnome'
</codeblock>
      <p>
The quotes in the last example are necessary to stop the shell from
interpreting the pattern itself.
</p>
    </section>
    <section name="apropos">
      <title>apropos</title>
      <p>
This command behaves almost identical to <xref section="list">fink list</xref>. The most
notable difference is that <code>fink apropos</code> also searches
the package descriptions to find packages. The second difference is that 
the search string must be supplied and is not optional.
</p>
      <codeblock>
fink apropos irc          - list all packages for which 'irc' 
			    occurs in the name or description.
fink apropos -s=kde irc   - the same as above, but restricted to 
			    packages from the kde section.
</codeblock>
    </section>
    <section name="describe">
      <title>describe</title>
      <p>
This command displays a description of the package you name on the
command line.
Note that only a small part of the packages currently have a
description.
</p>
      <p>
Aliases: <em>desc, description, info</em>
</p>
    </section>
    <section name="plugins">
      <title>plugins</title>
      <p> List the (optional) plugins available to the <code>fink</code> program.  Currently lists the notification mechanisms and the source-tarball
           checksum algorithms.</p>
    </section>
    <section name="fetch">
      <title>fetch</title>
      <p>Downloads the named packages, but does not install them. This command
will download the tarballs even if they were downloaded before.</p>
      <p>The following flags can be used with the <code>fetch</code> command:</p>
      <codeblock>-h,--help		Show the options which are available.
-i,--ignore-restrictive	Do not fetch packages that are &amp;quot;License: Restrictive&amp;quot;.
                      	Useful for mirrors, because some restrictive packages
                      	do not allow source mirroring.
-d,--dry-run		Just display information about the file(s) that would
			be downloaded for the package(s) to be fetched; do not
			actually download anything.
-r,--recursive		Also fetch packages that are dependencies of the
			package(s) to be fetched.</codeblock>
    </section>
    <section name="fetch-all">
      <title>fetch-all</title>
      <p>Downloads <em>all</em> package source files. Like <xref section="fetch">fetch</xref>, this downloads the
tarballs even when they were downloaded before.</p>
      <p>These flags can be used with the <code>fink fetch-all</code> command:</p>
      <codeblock>-h,--help
-i,--ignore-restrictive
-d,--dry-run</codeblock>
    </section>
    <section name="fetch-missing">
      <title>fetch-missing</title>
      <p>Downloads <em>all</em> missing package source files. This command will only download
files that are not present on the system.</p>
      <p>These flags can be used with the <code>fink fetch-missing</code> command:</p>
      <codeblock>-h,--help
-i,--ignore-restrictive
-d,--dry-run</codeblock>
    </section>
    <section name="build">
      <title>build</title>
      <p>Builds a package, but does not install it. As usual, the source
tarballs are downloaded if they can not be found. The result of this
command is an installable .deb package file, which you can quickly
install later with the install command. This command will do nothing
if the .deb already exists. Note that dependencies are still
<em>installed</em>, not just built.</p>
      <p>
The <xref section="options">--use-binary-dist option</xref> is applicable here.
      </p>
    </section>
    <section name="rebuild">
      <title>rebuild</title>
      <p>Builds a package (like the build command), but ignores and overwrites
the existing .deb file. If the package is installed, the newly created
.deb file will also be installed in the system via <code>dpkg</code>. Very useful
during package development.</p>
    </section>
    <section name="reinstall">
      <title>reinstall</title>
      <p>Same as install, but will install the package via <code>dpkg</code> even when it is
already installed. You can use this when you accidentally deleted
package files or changed configuration files and want to get the
default settings back.</p>
    </section>
    <section name="configure">
      <title>configure</title>
      <p>
Reruns the <code>fink</code> configuration process.
This will let you change your mirror sites and proxy settings, among
others.
</p>
      <p><em>New in</em> <code>fink-0.26.0</code>: This command will also let you turn on the unstable trees if desired.</p>
    </section>
    <section name="selfupdate">
      <title>selfupdate</title>
      <p>
	This command automates the process of upgrading to a new Fink
	release. It checks the Fink website to see if a new version is
	available. It then downloads the package descriptions and updates
	the core packages, including <code>fink</code> itself. This command can upgrade
	to regular releases, but it can also setup your <filename>/sw/fink/dists</filename>
	directory tree for direct git or rsync updates, if you select one of those options the first time this command is run.  This means that you then
	will be able to access the very latest revisions of all packages.
</p>
      <p>
If the <xref section="options">--use-binary-dist option</xref> is enabled,
the list of available packages in the binary distribution is also updated.
      </p>
    </section>
    <section name="selfupdate-rsync">
      <title>selfupdate-rsync</title>
      <p>Use this command to make <code>fink selfupdate</code> use rsync to update its package list.</p>
      <p>This is the recommended way to update Fink when building from source.</p>
      <p><em>Note:</em>  rsync updates only update the active <xref chapter="conf" section="optional">trees</xref> (e.g. if unstable isn't turned on in <code>fink.conf</code> the list of unstable packages won't be updated.</p>
    </section>
    <section name="selfupdate-git">
      <title>selfupdate-git</title>
      <p>Use this command to make <code>fink selfupdate</code> use Git access to update its package list.</p>
      <p>Rsync updating is preferred, except for developers and those people who are behind firewalls that disallow rsync.</p>
    </section>
    <section name="index">
      <title>index</title>
      <p>
   Rebuilds the package cache. You should not normally need to execute
   this manually, as <code>fink</code> should auto-detect when it needs to be updated.
</p>
    </section>
    <section name="validate">
      <title>validate</title>
      <p>
   This command performs various checks on <filename>.info</filename> and <filename>.deb</filename> files. Package
   maintainers should run this on their package descriptions and
   corresponding built packages before submitting them.</p>
      <p>The following optional options may be used:</p>
      <codeblock>-h,--help            - Show the options which are available.
-p,--prefix          - Simulate an alternate Fink basepath prefix (%p) within
                      the files being validated.
--pedantic, --no-pedantic
                     - Control the display of nitpicky formatting warnings.
                      --pedantic is the default.</codeblock>
      <p>
   Aliases: <em>check</em>
</p>
    </section>
    <section name="scanpackages">
      <title>scanpackages</title>
      <p>
   Updates the <code>apt-get</code> database of debs; defaults to updating all of the trees, but may be restricted to a set of one or more trees given as arguments.
</p>
    </section>
    <section name="cleanup">
      <title>cleanup</title>
      <p>
   Removes obsolete and temporary files. 
   This can reclaim large amounts of disk space.  One or more modes may be specified:</p>
      <codeblock>--debs               - Delete .deb files (compiled binary package archives)
                       corresponding to versions of packages that are neither
                       described by a package description (.info) file in the
                       currently-active trees nor presently installed.
--sources,--srcs     - Delete sources (tarballs, etc.) that are not used by
                       any package description (.info) file in the currently-
                       active trees.
--buildlocks, --bl   - Delete stale buildlock packages.
--dpkg-status        - Remove entries for packages that are not installed from
                       the dpkg "status" database.
--obsolete-packages  - Attempt to uninstall all installed packges that are
                       obsolete. (new in fink-0.26.0)
--all                - All of the above modes. (new in fink-0.26.0)</codeblock>
      <p>If no mode is specified, <code>--debs --sources</code> is the default action. </p>
      <p>In addition, the following options may be used:</p>
      <codeblock>-k,--keep-src        - Move old source files to /sw/src/old/ instead of deleting them.
-d,--dry-run         - Print the names of the files that would be deleted, but
                       do not actually delete them.
-h,--help            - Show the modes and options which are available.</codeblock>
      <!--TODO:  current branch_0_25 fink scanpackages with no mode specified combines the effects of the - - debs and - - srcs modes; update when 0.25.1 is released-->
    </section>
    <section name="dumpinfo">
      <title>dumpinfo</title>
      <p>
	Shows how <code>fink</code> parses parts of a package's <filename>.info</filename> file. Various
	fields and percent expansions will be displayed according
	to <em>options</em> as follows:
      </p>
      <codeblock>
-h, --help           - Show the options which are available.
-a, --all            - Display all fields from the package description.
                       This is the default mode when no --field or
                       --percent flags are given.
-f fieldname,        - Display the given fieldname(s),
  --field=fieldname    in the order listed.
-p key,              - Display the given percent expansion key(s),
   --percent=key       in the order listed.
      </codeblock>
    </section>
    <section name="show-deps">
      <title>show-deps</title>
      <p>Displays a human-readable list of the compile-time (build) and run-
           time (installation) dependencies of the listed package(s).</p>
    </section>
  </chapter>
</document>
